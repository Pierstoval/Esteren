version: '3'
services:
    mysql:
        image: 'mysql:5.7'
        volumes:
          - './docker/mysql/:/app/'
        environment:
            - MYSQL_DATABASE=corahnrin
            - MYSQL_ROOT_PASSWORD=corahnrin

    adminer:
        image: 'adminer:latest'
        links:
            - mysql
        ports:
            - '8081:8080'
        environment:
            - ADMINER_DEFAULT_SERVER=mysql

    php:
        build:
            dockerfile: ./docker/php/Dockerfile
            context: .
        working_dir: /srv
        ports:
            - '8080:8080'
        links:
            - mysql
            - mailcatcher
        volumes:
            - './:/srv'

    mailcatcher:
        image: 'tophfr/mailcatcher:latest'
        ports:
            - '1080:80'
